{% extends 'landing/base.html' %}
{% load recaptcha2 %}
{% load landing_utils %}
{% load cache %}

{% block page_extra_head %}
  {% recaptcha_init %}
<style>#GoogleMap {height: 480px;border: 2em solid white;}</style>
{% endblock page_extra_head %}

{% block header %}
  {% include "landing/parts/header.html" %}
{% endblock header %}

{% block content %}
<div class="container">
  <div class="page-header" id="banner">
    <div class="row">
      <div class="col-lg-8 col-md-7 col-sm-6">
        <h1>Email us</h1>
        <p class="lead"></p>
      </div> <!-- col-lg-8 col... -->
      <div class="col-lg-4 col-md-5 col-sm-6">
        <div class="sponsor">
        </div> <!-- sponsor -->
      </div> <!-- col-lg-4 col... -->
    </div> <!-- row -->
  </div> <!-- page-header -->
  <div class="row">
    <div class='col-md-5'>
      {% if messages %}
        {% for message in messages %}
          {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
      <div class="alert alert-success alert-dismissable alert-link">
        <button class="close" type="button" data-dismiss="alert" aria-hidden="true">&#215;</button>
        {{ message }}
      </div>
          {% endif %}
        {% endfor %}
      {% endif %}
      <form id='contact_form' class="form-horizontal" role="form" action="" method="POST" novalidate>
        {% include 'landing/form/form.html' %}
      </form>
    </div>
    <div class="col-md-6 col-md-offset-1 color-grid" id="GoogleMap">
    </div> <!-- #GoogleMap -->
  </div> <!-- row -->
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <h1 class="text-center"></h1>
    </div>
  </div> <!-- row -->
</div> <!-- container -->
{% endblock content %}

{% block page_extra_script %}
<script>
  function initMap() {
      var agcs = new google.maps.LatLng(33.023705,-96.772012);
      var infowindow = new google.maps.InfoWindow({
          content:
            '<div id="content">'+
              '<span style="font-size: 16px;">'+
                '<address>'+
                  '1727 Nest Pl.<br>'+
                  'Plano, TX 75093<br>'+
                  '<a href="tel:+19726569338">(972) 656-9338</a>'+
                '</address>'+
                '<a href="https://maps.google.com?daddr=Alpha+Geek+Computer+Services+1727+Nest+Place+Plano+TX+75093"'+
                   'target="_blank">Get Directions <i class="fa fa-external-link-square"></i>'+
                '</a>'+
              '</span>'+
            '</div>'
      });

      var map = new google.maps.Map(document.getElementById('GoogleMap'), {
          center: agcs,
          zoom: 10,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          mapTypeControl:false,
          streetViewControl:false
      });

      var marker = new google.maps.Marker({
          position:agcs,
          map: map,
          title: 'AGCS'
      });

      google.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map, marker);
          map.setZoom(10);
          map.setCenter(marker.getPosition());
      });

      google.maps.event.addListener(map,'center_changed',function() {
          window.setTimeout(function() {
              map.panTo(marker.getPosition());
          },3000);
      });

      infowindow.open(map, marker);
  }
</script>

{% if DEBUG %}
<script async defer src="https://maps.googleapis.com/maps/api/js?callback=initMap&key=AIzaSyCEE3LMbP2_ZJsha-M1yMrsaVqAltAwnHE"></script>
{% else %}
<script async defer src="https://maps.googleapis.com/maps/api/js?callback=initMap&key=AIzaSyALXHHKqqKIM-E8_zyhCoGk8psef7d9t0k"></script>
{% endif %}

{% endblock page_extra_script %}
